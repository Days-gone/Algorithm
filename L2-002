#include <vector>
#include<iostream>
#include<set>
#include <cmath>


using namespace std;

const int N = 100010;

struct node
{
    int data,next;
};

bool st[N];
node a[N];
set<int>s;
int n,p;

int main()
{
    cin>>p>>n;
    while (n -- )
    {
        int tem;
        cin>>tem;
        cin>>a[tem].data>>a[tem].next;
    }
    
    vector<int>v1,v2;
    for(int i = p; i != -1; i = a[i].next)
    {
        if (!st[abs(a[i].data)])
        {
            v1.push_back(i);
            st[abs(a[i].data)] = true;
        }
        else 
        {
            v2.push_back(i);
        }
    }
    
    for(int i =0 ;i < v1.size();i ++)
    {
        printf("%05d %d ",v1[i],a[v1[i]].data);
        if ( i == v1.size()-1)puts("-1");
        else printf("%05d\n",v1[i + 1]);
    }
    for(int i =0 ;i < v2.size();i ++)
    {
        printf("%05d %d ",v2[i],a[v2[i]].data);
        if ( i == v2.size()-1)puts("-1");
        else printf("%05d\n",v2[i + 1]);
    }
    return 0;
}
